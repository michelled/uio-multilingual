<html lang="fr">
    <head>

        <link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/Enactors.css" />
    	<link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/PrefsEditor.css" />
    	<link rel="stylesheet" type="text/css" href="../lib/infusion/src/framework/preferences/css/SeparatedPanelPrefsEditor.css" />

        <script src="../lib/infusion/infusion-all.js">
        </script>

    </head>
    <body>

    <!-- BEGIN markup for Preference Editor -->
	<div class="flc-prefsEditor-separatedPanel fl-prefsEditor-separatedPanel">
		<!-- This is the div that will contain the Preference Editor component -->
		<div class="flc-slidingPanel-panel flc-prefsEditor-iframe"></div>

		<!-- This div is for the sliding panel that shows and hides the Preference Editor controls -->
		<div class="fl-panelBar">
			<span class="fl-prefsEditor-buttons">
				<button id="reset" class="flc-prefsEditor-reset fl-prefsEditor-reset"><span class="fl-icon-undo"></span> Réinitialiser</button>
				<button id="show-hide" class="flc-slidingPanel-toggleButton fl-prefsEditor-showHide"> Show/Hide</button>
			</span>
		</div>
	</div>
	<!-- END markup for Preference Editor -->

	<div class="flc-toc-tocContainer toc"> </div>

    <h1>Bonjour, Monde</h1>
    <p>
        Bienvenue dans la démo multilingue UIO.
    </p>

    <ul>
        <li>
            <a href="index_en.html">en</a>
        </li>
        <li>
            <a href="index_fr.html">fr</a>
        </li>
        <li>
            <a href="index_fa.html">fa</a>
        </li>
    </ul>

    <script>
		$(document).ready(function () {
		    var uio = fluid.uiOptions.prefsEditor(".flc-prefsEditor-separatedPanel", {
		        terms: {
		            "templatePrefix": "./src/html/ltr",
		            "messagePrefix": "./src/messages"
		        },
		        "tocTemplate": "../node_modules/infusion/src/components/tableOfContents/html/TableOfContents.html",
		        "ignoreForToC": {
		            "overviewPanel": ".flc-overviewPanel"
		        },
				components: {
					prefsEditorLoader:{
                        // This should work according to my read of the documentation at
                        // http://docs.fluidproject.org/infusion/development/LocalizationInThePreferencesFramework.html#specifying-a-localization
                        // options: {
                        //     settings: {
                        //         locale: "fr"
                        //     }
                        // },
                        // Setting the locale directly on the message loader works
						options: {
							components: {
								messageLoader: {
									options: {
										locale: "fr"
									}
								}
							}
						}
					}
				}
		    });
		});
	</script>
    </body>
</html>
